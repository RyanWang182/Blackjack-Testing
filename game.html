<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino Blackjack</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #0f5132, #1e7e34);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }

        .table {
            width: 90vw;
            max-width: 1000px;
            height: 70vh;
            min-height: 600px;
            background: radial-gradient(ellipse at center, #228b22, #006400);
            border: 20px solid #8b4513;
            border-radius: 50%;
            position: relative;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.5), 0 0 30px rgba(0,0,0,0.8);
        }

        .table::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 3px solid #ffd700;
            border-radius: 50%;
            pointer-events: none;
        }

        .dealer-area {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: white;
            z-index: 10;
        }

        .dealer-info {
            position: absolute;
            top: 60px;
            right: 280px;
            color: white;
            z-index: 10;
            text-align: left;
        }

        .player-area {
            position: absolute;
            bottom: 140px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: white;
            z-index: 10;
        }

        .player-info {
            position: absolute;
            bottom: 140px;
            right: 280px;
            color: white;
            z-index: 10;
            text-align: left;
        }

        .hand {
            display: flex;
            justify-content: center;
            gap: -30px;
            margin: 20px 0;
            min-height: 120px;
            align-items: center;
        }

        .card {
            width: 80px;
            height: 112px;
            background: white;
            border-radius: 8px;
            border: 2px solid #333;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
            font-weight: bold;
            position: relative;
            box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            transition: all 0.5s ease;
            transform-style: preserve-3d;
        }

        .card.moving {
            z-index: 1000;
        }

        .card-back {
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
        }

        .card-back::before {
            content: '♠♥♦♣';
            font-size: 20px;
        }

        .card.red {
            color: #d32f2f;
        }

        .card.black {
            color: #333;
        }

        .card-value {
            padding: 5px;
            font-size: 12px;
        }

        .card-suit {
            font-size: 30px;
            margin: auto;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
            z-index: 200;
        }

        .btn {
            padding: 10px 18px;
            font-size: 14px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .btn-primary {
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            color: #333;
        }

        .btn-danger {
            background: linear-gradient(45deg, #dc3545, #e74c3c);
            color: white;
        }

        .btn-success {
            background: linear-gradient(45deg, #28a745, #34ce57);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .chips-area {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            padding: 12px;
            border-radius: 10px;
            color: white;
            z-index: 300;
        }

        .betting-area {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 12px;
            border-radius: 10px;
            color: white;
            z-index: 300;
            max-width: 250px;
        }

        .chip-controls {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .chip-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #ffd700;
            font-weight: bold;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .chip-1 { background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; }
        .chip-5 { background: linear-gradient(45deg, #4ecdc4, #00cec9); color: white; }
        .chip-25 { background: linear-gradient(45deg, #45b7d1, #3742fa); color: white; }
        .chip-100 { background: linear-gradient(45deg, #333, #555); color: #ffd700; }

        .chip-btn:hover {
            transform: scale(1.1);
        }

        .deck-area {
            position: absolute;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
        }

        .deck {
            width: 80px;
            height: 112px;
            position: relative;
        }

        .deck-card {
            position: absolute;
            width: 80px;
            height: 112px;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            border-radius: 8px;
            border: 2px solid #333;
        }

        .deck-card:nth-child(1) { transform: translate(0px, 0px); }
        .deck-card:nth-child(2) { transform: translate(1px, -1px); }
        .deck-card:nth-child(3) { transform: translate(2px, -2px); }

        .message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            z-index: 5000;
            display: none;
        }

        .score {
            font-size: 18px;
            margin: 10px 0;
            font-weight: bold;
        }

        #split-hand {
            margin-top: 20px;
        }

        .custom-bet-input {
            width: 90px;
            padding: 4px;
            border-radius: 4px;
            border: 1px solid #ccc;
            font-size: 12px;
        }

        @media (max-width: 768px) {
            .table {
                width: 95vw;
                height: 85vh;
            }
            
            .controls {
                bottom: 10px;
            }
            
            .chip-controls {
                justify-content: center;
            }
            
            .betting-area, .chips-area {
                font-size: 12px;
                padding: 8px;
                max-width: 200px;
            }
            
            .dealer-area {
                top: 80px;
            }
            
            .dealer-info {
                top: 20px;
                right: 20px;
            }
            
            .player-area {
                bottom: 160px;
            }
            
            .player-info {
                bottom: 100px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="table">
        <div class="deck-area">
            <div class="deck">
                <div class="deck-card"></div>
                <div class="deck-card"></div>
                <div class="deck-card"></div>
            </div>
        </div>

        <div class="chips-area">
            <h3>Your Chips: $<span id="chips">1000</span></h3>
            <button class="btn btn-success" onclick="addChips()" style="margin-top: 8px; font-size: 12px;">Add $500</button>
        </div>

        <div class="betting-area">
            <h3>Current Bet: $<span id="current-bet">0</span></h3>
            <div style="margin: 8px 0;">
                <input type="number" id="custom-bet" placeholder="Amount" class="custom-bet-input">
                <button class="btn btn-primary" onclick="placeCustomBet()" 
                        style="margin-left: 5px; font-size: 10px; padding: 4px 8px;">Bet</button>
            </div>
            <div class="chip-controls">
                <button class="chip-btn chip-1" onclick="placeBet(1)">$1</button>
                <button class="chip-btn chip-5" onclick="placeBet(5)">$5</button>
                <button class="chip-btn chip-25" onclick="placeBet(25)">$25</button>
                <button class="chip-btn chip-100" onclick="placeBet(100)">$100</button>
            </div>
            <button class="btn btn-danger" onclick="clearBet()" style="margin-top: 8px; font-size: 10px;">Clear Bet</button>
        </div>

        <div class="dealer-area">
            <div class="hand" id="dealer-hand"></div>
        </div>

        <div class="dealer-info">
            <h2>Dealer</h2>
            <div class="score">Score: <span id="dealer-score">0</span></div>
        </div>

        <div class="player-area">
            <div class="hand" id="player-hand"></div>
            <div class="hand" id="split-hand" style="display: none;">
                <div style="text-align: center; margin-bottom: 10px; font-size: 14px; color: white;">Split Hand</div>
            </div>
        </div>

        <div class="player-info">
            <h2>Player</h2>
            <div class="score">Score: <span id="player-score">0</span></div>
            <div id="split-score-area" style="display: none;">
                <div class="score" style="margin-top: 10px;">Split Score: <span id="split-score">0</span></div>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="startGame()">New Game</button>
            <button class="btn btn-success" id="hit-btn" onclick="hit()" disabled>Hit</button>
            <button class="btn btn-danger" id="stand-btn" onclick="stand()" disabled>Stand</button>
            <button class="btn btn-primary" id="double-btn" onclick="doubleDown()" disabled>Double Down</button>
            <button class="btn btn-primary" id="split-btn" onclick="split()" disabled style="display: none;">Split</button>
        </div>

        <div class="message" id="message"></div>
    </div>

    <script>
        class BlackjackGame {
            constructor() {
                this.deck = [];
                this.playerHand = [];
                this.splitHand = [];
                this.dealerHand = [];
                this.gameActive = false;
                this.splitActive = false;
                this.currentHand = 'main';
                this.chips = 1000;
                this.currentBet = 0;
                this.splitBet = 0;
                this.dealerHoleCard = null;
                this.playerCanDoubleDown = true;
                this.splitCanDoubleDown = true;
                this.handsCompleted = 0;
                
                this.createDeck();
                this.updateDisplay();
            }

            createDeck() {
                const suits = ['♠', '♥', '♦', '♣'];
                const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
                
                this.deck = [];
                for (let suit of suits) {
                    for (let value of values) {
                        this.deck.push({
                            suit: suit,
                            value: value,
                            numValue: this.getCardValue(value)
                        });
                    }
                }
                this.shuffleDeck();
            }

            shuffleDeck() {
                for (let i = this.deck.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
                }
            }

            getCardValue(value) {
                if (value === 'A') return 11;
                if (['K', 'Q', 'J'].includes(value)) return 10;
                return parseInt(value);
            }

            calculateScore(hand) {
                let score = 0;
                let aces = 0;
                
                for (let card of hand) {
                    if (card.value === 'A') {
                        aces++;
                        score += 11;
                    } else {
                        score += card.numValue;
                    }
                }
                
                while (score > 21 && aces > 0) {
                    score -= 10;
                    aces--;
                }
                
                return score;
            }

            createCardElement(card, isHidden = false) {
                const cardEl = document.createElement('div');
                cardEl.className = 'card';
                
                if (isHidden) {
                    cardEl.className += ' card-back';
                    cardEl.innerHTML = '';
                } else {
                    const isRed = ['♥', '♦'].includes(card.suit);
                    cardEl.className += isRed ? ' red' : ' black';
                    
                    cardEl.innerHTML = `
                        <div class="card-value">${card.value}</div>
                        <div class="card-suit">${card.suit}</div>
                        <div class="card-value" style="transform: rotate(180deg);">${card.value}</div>
                    `;
                }
                
                return cardEl;
            }

            animateCardDeal(card, targetContainer, isHidden = false) {
                return new Promise((resolve) => {
                    const cardEl = this.createCardElement(card, isHidden);
                    const deck = document.querySelector('.deck');
                    const deckRect = deck.getBoundingClientRect();
                    const targetRect = targetContainer.getBoundingClientRect();
                    
                    cardEl.style.position = 'fixed';
                    cardEl.style.left = deckRect.left + 'px';
                    cardEl.style.top = deckRect.top + 'px';
                    cardEl.style.zIndex = '1000';
                    cardEl.className += ' moving';
                    
                    document.body.appendChild(cardEl);
                    
                    setTimeout(() => {
                        cardEl.style.transition = 'all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                        cardEl.style.left = (targetRect.left + targetContainer.children.length * 25) + 'px';
                        cardEl.style.top = targetRect.top + 'px';
                        cardEl.style.transform = 'rotate(' + (Math.random() * 10 - 5) + 'deg)';
                    }, 50);
                    
                    setTimeout(() => {
                        document.body.removeChild(cardEl);
                        const finalCard = this.createCardElement(card, isHidden);
                        finalCard.style.transform = 'rotate(' + (Math.random() * 10 - 5) + 'deg)';
                        targetContainer.appendChild(finalCard);
                        resolve();
                    }, 550);
                });
            }

            async dealInitialCards() {
                const playerHand = document.getElementById('player-hand');
                const dealerHand = document.getElementById('dealer-hand');
                
                const playerCard1 = this.deck.pop();
                this.playerHand.push(playerCard1);
                await this.animateCardDeal(playerCard1, playerHand);
                await new Promise(resolve => setTimeout(resolve, 200));
                
                const dealerCard1 = this.deck.pop();
                this.dealerHand.push(dealerCard1);
                this.dealerHoleCard = dealerCard1;
                await this.animateCardDeal(dealerCard1, dealerHand, true);
                await new Promise(resolve => setTimeout(resolve, 200));
                
                const playerCard2 = this.deck.pop();
                this.playerHand.push(playerCard2);
                await this.animateCardDeal(playerCard2, playerHand);
                await new Promise(resolve => setTimeout(resolve, 200));
                
                const dealerCard2 = this.deck.pop();
                this.dealerHand.push(dealerCard2);
                await this.animateCardDeal(dealerCard2, dealerHand);
                
                this.updateScores();
                this.checkForSplit();
                this.checkForBlackjack();
            }

            checkForSplit() {
                const splitBtn = document.getElementById('split-btn');
                if (this.playerHand.length === 2 && 
                    this.playerHand[0].value === this.playerHand[1].value &&
                    this.chips >= this.currentBet &&
                    !this.splitActive) {
                    splitBtn.style.display = 'inline-block';
                    splitBtn.disabled = false;
                } else {
                    splitBtn.style.display = 'none';
                    splitBtn.disabled = true;
                }
            }

            checkForBlackjack() {
                const playerScore = this.calculateScore(this.playerHand);
                const dealerScore = this.calculateScore(this.dealerHand);
                
                if (playerScore === 21) {
                    if (dealerScore === 21) {
                        this.endGame("Both have Blackjack! It's a tie!");
                        this.chips += this.currentBet;
                    } else {
                        this.endGame("Blackjack! You win!");
                        this.chips += Math.floor(this.currentBet * 2.5);
                    }
                    return true;
                }
                
                return false;
            }

            async hit() {
                if (!this.gameActive) return;
                
                const currentHandArray = this.currentHand === 'main' ? this.playerHand : this.splitHand;
                const targetContainer = this.currentHand === 'main' ? 
                    document.getElementById('player-hand') : 
                    document.getElementById('split-hand');
                
                if (this.currentHand === 'main') {
                    this.playerCanDoubleDown = false;
                } else {
                    this.splitCanDoubleDown = false;
                }
                
                this.updateDoubleDownButton();
                
                const card = this.deck.pop();
                currentHandArray.push(card);
                
                await this.animateCardDeal(card, targetContainer);
                this.updateScores();
                
                const score = this.calculateScore(currentHandArray);
                if (score > 21) {
                    if (this.splitActive && this.currentHand === 'main') {
                        this.switchToSplitHand();
                    } else if (this.splitActive && this.currentHand === 'split') {
                        this.handsCompleted++;
                        if (this.handsCompleted === 2) {
                            this.stand();
                        }
                    } else {
                        this.endGame("Bust! You lose!");
                    }
                } else if (score === 21) {
                    if (this.splitActive && this.currentHand === 'main') {
                        this.switchToSplitHand();
                    } else if (this.splitActive && this.currentHand === 'split') {
                        this.handsCompleted++;
                        if (this.handsCompleted === 2) {
                            this.stand();
                        }
                    } else {
                        this.stand();
                    }
                }
            }

            switchToSplitHand() {
                this.handsCompleted++;
                this.currentHand = 'split';
                this.playerCanDoubleDown = this.splitCanDoubleDown;
                this.updateDoubleDownButton();
                this.showMessage("Now playing split hand!");
                
                document.getElementById('split-hand').style.border = '2px solid #ffd700';
                document.getElementById('player-hand').style.border = 'none';
            }

            updateDoubleDownButton() {
                const canDouble = this.currentHand === 'main' ? this.playerCanDoubleDown : this.splitCanDoubleDown;
                const hasEnoughChips = this.chips >= this.currentBet;
                document.getElementById('double-btn').disabled = !canDouble || !hasEnoughChips;
            }

            async stand() {
                if (!this.gameActive) return;
                
                if (this.splitActive && this.currentHand === 'main' && this.handsCompleted === 0) {
                    this.switchToSplitHand();
                    return;
                }
                
                this.gameActive = false;
                document.getElementById('hit-btn').disabled = true;
                document.getElementById('stand-btn').disabled = true;
                document.getElementById('double-btn').disabled = true;
                document.getElementById('split-btn').style.display = 'none';
                
                document.getElementById('player-hand').style.border = 'none';
                document.getElementById('split-hand').style.border = 'none';
                
                const dealerHand = document.getElementById('dealer-hand');
                const holeCardElement = dealerHand.firstChild;
                if (holeCardElement && holeCardElement.classList.contains('card-back')) {
                    dealerHand.removeChild(holeCardElement);
                    const revealedCard = this.createCardElement(this.dealerHoleCard);
                    revealedCard.style.transform = 'rotate(' + (Math.random() * 10 - 5) + 'deg)';
                    dealerHand.insertBefore(revealedCard, dealerHand.firstChild);
                }
                
                this.updateScores();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                while (this.calculateScore(this.dealerHand) < 17) {
                    const card = this.deck.pop();
                    this.dealerHand.push(card);
                    await this.animateCardDeal(card, dealerHand);
                    this.updateScores();
                    await new Promise(resolve => setTimeout(resolve, 800));
                }
                
                this.determineWinner();
            }

            async doubleDown() {
                if (!this.gameActive) return;
                
                const currentHandArray = this.currentHand === 'main' ? this.playerHand : this.splitHand;
                const canDouble = this.currentHand === 'main' ? this.playerCanDoubleDown : this.splitCanDoubleDown;
                const betAmount = this.currentHand === 'main' ? this.currentBet : this.splitBet;
                
                if (!canDouble || this.chips < betAmount) return;
                
                this.chips -= betAmount;
                if (this.currentHand === 'main') {
                    this.currentBet *= 2;
                } else {
                    this.splitBet *= 2;
                }
                this.updateDisplay();
                
                await this.hit();
                
                if (this.gameActive && this.calculateScore(currentHandArray) <= 21) {
                    if (this.splitActive && this.currentHand === 'main') {
                        this.switchToSplitHand();
                    } else {
                        this.stand();
                    }
                }
            }

            async split() {
                if (!this.gameActive || this.playerHand.length !== 2 || 
                    this.playerHand[0].value !== this.playerHand[1].value ||
                    this.chips < this.currentBet) return;
                
                this.splitActive = true;
                this.splitBet = this.currentBet;
                this.chips -= this.currentBet;
                this.updateDisplay();
                
                const secondCard = this.playerHand.pop();
                this.splitHand.push(secondCard);
                
                const playerHandEl = document.getElementById('player-hand');
                playerHandEl.removeChild(playerHandEl.lastChild);
                
                const splitHandEl = document.getElementById('split-hand');
                splitHandEl.style.display = 'block';
                document.getElementById('split-score-area').style.display = 'block';
                
                const cardEl = this.createCardElement(secondCard);
                cardEl.style.transform = 'rotate(' + (Math.random() * 10 - 5) + 'deg)';
                splitHandEl.appendChild(cardEl);
                
                await new Promise(resolve => setTimeout(resolve, 500));
                
                const newMainCard = this.deck.pop();
                this.playerHand.push(newMainCard);
                await this.animateCardDeal(newMainCard, playerHandEl);
                
                await new Promise(resolve => setTimeout(resolve, 300));
                
                const newSplitCard = this.deck.pop();
                this.splitHand.push(newSplitCard);
                await this.animateCardDeal(newSplitCard, splitHandEl);
                
                this.updateScores();
                
                document.getElementById('split-btn').style.display = 'none';
                this.currentHand = 'main';
                
                playerHandEl.style.border = '2px solid #ffd700';
                
                this.showMessage("Playing main hand first!");
            }

            determineWinner() {
                const dealerScore = this.calculateScore(this.dealerHand);
                const playerScore = this.calculateScore(this.playerHand);
                let message = "";
                let totalWinnings = 0;
                
                if (this.splitActive) {
                    const splitScore = this.calculateScore(this.splitHand);
                    
                    if (playerScore > 21) {
                        message += "Main hand busts! ";
                    } else if (dealerScore > 21 || playerScore > dealerScore) {
                        message += "Main hand wins! ";
                        totalWinnings += this.currentBet * 2;
                    } else if (playerScore === dealerScore) {
                        message += "Main hand ties! ";
                        totalWinnings += this.currentBet;
                    } else {
                        message += "Main hand loses! ";
                    }
                    
                    if (splitScore > 21) {
                        message += "Split hand busts!";
                    } else if (dealerScore > 21 || splitScore > dealerScore) {
                        message += "Split hand wins!";
                        totalWinnings += this.splitBet * 2;
                    } else if (splitScore === dealerScore) {
                        message += "Split hand ties!";
                        totalWinnings += this.splitBet;
                    } else {
                        message += "Split hand loses!";
                    }
                    
                } else {
                    if (dealerScore > 21) {
                        message = "Dealer busts! You win!";
                        totalWinnings = this.currentBet * 2;
                    } else if (playerScore > dealerScore) {
                        message = "You win!";
                        totalWinnings = this.currentBet * 2;
                    } else if (dealerScore > playerScore) {
                        message = "Dealer wins!";
                    } else {
                        message = "It's a tie!";
                        totalWinnings = this.currentBet;
                    }
                }
                
                this.chips += totalWinnings;
                this.endGame(message);
            }

            endGame(message) {
                this.gameActive = false;
                this.splitActive = false;
                document.getElementById('hit-btn').disabled = true;
                document.getElementById('stand-btn').disabled = true;
                document.getElementById('double-btn').disabled = true;
                document.getElementById('split-btn').style.display = 'none';
                
                document.getElementById('player-hand').style.border = 'none';
                document.getElementById('split-hand').style.border = 'none';
                
                this.showMessage(message);
                this.currentBet = 0;
                this.splitBet = 0;
                this.updateDisplay();
            }

            showMessage(text) {
                const messageEl = document.getElementById('message');
                messageEl.textContent = text;
                messageEl.style.display = 'block';
                
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 3000);
            }

            updateScores() {
                const playerScore = this.calculateScore(this.playerHand);
                let dealerScore = this.calculateScore(this.dealerHand);
                
                if (this.gameActive && this.dealerHoleCard) {
                    const visibleCards = this.dealerHand.slice(1);
                    dealerScore = this.calculateScore(visibleCards);
                }
                
                document.getElementById('player-score').textContent = playerScore;
                document.getElementById('dealer-score').textContent = dealerScore;
                
                if (this.splitActive) {
                    const splitScore = this.calculateScore(this.splitHand);
                    document.getElementById('split-score').textContent = splitScore;
                    document.getElementById('split-score-area').style.display = 'block';
                } else {
                    document.getElementById('split-score-area').style.display = 'none';
                }
            }

            updateDisplay() {
                document.getElementById('chips').textContent = this.chips;
                document.getElementById('current-bet').textContent = this.currentBet;
            }

            startGame() {
                if (this.currentBet === 0) {
                    this.showMessage("Please place a bet first!");
                    return;
                }
                
                if (this.chips < 0) {
                    this.showMessage("You're out of chips! Add more to continue.");
                    return;
                }
                
                this.playerHand = [];
                this.splitHand = [];
                this.dealerHand = [];
                this.dealerHoleCard = null;
                this.gameActive = true;
                this.splitActive = false;
                this.currentHand = 'main';
                this.playerCanDoubleDown = true;
                this.splitCanDoubleDown = true;
                this.handsCompleted = 0;
                this.splitBet = 0;
                
                document.getElementById('player-hand').innerHTML = '';
                document.getElementById('split-hand').innerHTML = '';
                document.getElementById('dealer-hand').innerHTML = '';
                document.getElementById('split-hand').style.display = 'none';
                document.getElementById('split-score-area').style.display = 'none';
                document.getElementById('player-hand').style.border = 'none';
                document.getElementById('split-hand').style.border = 'none';
                
                document.getElementById('hit-btn').disabled = false;
                document.getElementById('stand-btn').disabled = false;
                document.getElementById('double-btn').disabled = false;
                document.getElementById('split-btn').style.display = 'none';
                
                this.chips -= this.currentBet;
                this.updateDisplay();
                
                if (this.deck.length < 20) {
                    this.createDeck();
                }
                
                this.dealInitialCards();
            }

            placeBet(amount) {
                if (this.gameActive) return;
                
                if (this.chips >= amount) {
                    this.currentBet += amount;
                    this.updateDisplay();
                } else {
                    this.showMessage("Not enough chips!");
                }
            }

            clearBet() {
                if (this.gameActive) return;
                this.currentBet = 0;
                this.updateDisplay();
            }

            placeCustomBet() {
                if (this.gameActive) return;
                
                const customBetInput = document.getElementById('custom-bet');
                const amount = parseInt(customBetInput.value);
                
                if (isNaN(amount) || amount <= 0) {
                    this.showMessage("Please enter a valid bet amount!");
                    return;
                }
                
                if (this.chips >= amount) {
                    this.currentBet += amount;
                    this.updateDisplay();
                    customBetInput.value = '';
                } else {
                    this.showMessage("Not enough chips!");
                }
            }

            addChips() {
                this.chips += 500;
                this.updateDisplay();
                this.showMessage("Added $500 in chips!");
            }
        }

        // Initialize game
        const game = new BlackjackGame();

        // Global functions for buttons
        function startGame() { 
            game.startGame(); 
        }
        
        function hit() { 
            game.hit(); 
        }
        
        function stand() { 
            game.stand(); 
        }
        
        function doubleDown() { 
            game.doubleDown(); 
        }
        
        function split() { 
            game.split(); 
        }
        
        function placeBet(amount) { 
            game.placeBet(amount); 
        }
        
        function placeCustomBet() { 
            game.placeCustomBet(); 
        }
        
        function clearBet() { 
            game.clearBet(); 
        }
        
        function addChips() { 
            game.addChips(); 
        }
    </script>
</body>
</html>
                
